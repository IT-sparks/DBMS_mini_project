TRIGGERS






CREATE OR REPLACE FUNCTION schedule_check()
	RETURNS trigger AS 
$BODY$
BEGIN
	IF EXISTS (SELECT * FROM GAME WHERE DATE_OF_GAME=NEW.DATE_OF_GAME AND (HOST=NEW.HOST OR VISITOR=NEW.VISITOR OR HOST=NEW.VISITOR OR VISITOR=NEW.HOST))
	THEN
	RAISE EXCEPTION 'NO TEAM CAN PLAY 2 GAMES ON THE SAME DAY : ';
	END IF;
	RETURN NEW;
END;
$BODY$
LANGUAGE 'plpgsql';
CREATE TRIGGER GAME_PER_DAY BEFORE INSERT ON GAME FOR EACH ROW EXECUTE PROCEDURE SCHEDULE_CHECK() ;







CREATE TRIGGER GAME_PER_DAY BEFORE INSERT ON GAME FOR EACH ROW EXECUTE PROCEDURE SCHEDULE_CHECK() ;
